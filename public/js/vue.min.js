Vue.component("dish",{props:["dish"],template:'\n        <div>\n            <div class="space">\n                <div class="flout">\n                    <div class="image">\n                        <img :src="dish.image" :alt="dish.image">\n                    </div>\n                </div>\n            </div>\n            <p class="desc">{{ dish.name }}</p>\n            <p class="price">$ {{ dish.price }}</p>\n            <p class="quantity">{{ dish.quantity }} Bowels available</p>\n        </div>\n    '}),Vue.component("order-item",{props:["dish"],template:'\n        <div>\n            <div class="row m-0 align-items-center">\n                <div class="col-6 d-flex p-0">\n                    <div>\n                        <img v-bind:src="dish[\'image\']" alt="">\n                    </div>\n                    <div class="mx-2">\n                        <p class="m-0 name">{{ dish[\'name\'] }} </p>\n                        <p class="price">{{ dish[\'price\'] }} $</p>\n                    </div>\n                </div>\n                <div class="col-3 pr-0 text-center">\n                    <input type="text" v-model="dish[\'quantity\']" @keypress="isNumber($event)">\n                </div>\n                <div class="col-3 text-center">\n                    <p class="sub-price">$ {{ countSubTotal(dish[\'price\'], dish[\'quantity\']) }}</p>\n                </div>\n                <div>\n                </div>\n            </div>\n            <div class="row m-0 align-items-center pt-2">\n                <div class="col-9 p-0">\n                    <input type="text" class="text-justify" placeholder="Please, just a little bit spicy only.">\n                </div>\n                <div class="col-3 text-center">\n                    <button type="button" class="delete-item" @click="deleteDish(dish[\'id\'])">\n                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">\n                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />\n                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        </div>\n    ',methods:{deleteDish:function(e){this.$emit("delete-dish",e)},countSubTotal:function(e,t){return(e*t).toFixed(2)},isNumber:function(e){var t=(e=e||window.event).which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)&&46!==t))return!0;e.preventDefault()}}}),new Vue({el:"#content",data:function(){return{dishes:{},selectedDishes:[],total:0,search:"",alertTimer:null,apiUrl:window.location.origin+"/api/data"}},mounted:function(){var e=this;axios.get(this.apiUrl).then((function(t){return e.dishes=t.data.dishes})).catch((function(e){return console.log(e)}))},computed:{filteredDishes:function(){var e=this;return Object.values(this.dishes).filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())}))}},watch:{selectedDishes:{handler:function(){var e=0;this.selectedDishes.forEach((function(t){return e+=parseFloat(t.price*t.quantity)})),this.total=e.toFixed(2)},deep:!0}},methods:{addDish:function(e){this.selectedDishes.find((function(t){return t.id==e.id}))?this.showAlert("The dish already added to the order list","failed","pop-out"):(this.selectedDishes.push(e),this.showAlert("The dish has been added to the order list","success","pop-up"))},deleteDish:function(e){this.selectedDishes=this.selectedDishes.filter((function(t){return t.id!=e})),this.showAlert("The dish has been removed from the order list","success","pop-out")},submitOrder:function(){var e=this;document.querySelector(".btn-submit ~ .loader").style.display="flex",setTimeout((function(){e.selectedDishes=[],document.querySelector(".btn-submit ~ .loader").style.display="none",new bootstrap.Modal(document.getElementById("orderSubmissionAlert"),{}).show(),document.querySelector("#orders").classList.add("hidden")}),1e3)},openOrderList:function(e){e?document.querySelector("#orders").classList.remove("hidden"):document.querySelector("#orders").classList.add("hidden")},showAlert:function(e,t,i){var s=document.querySelector("#fixed-alert-box");s.querySelector("p").innerHTML=e,s.className="",s.classList.add(t),new Audio("../audio/".concat(i,".mp3")).play(),clearTimeout(this.alertTimer),this.alertTimer=setTimeout((function(){s.className="hidden"}),3e3)}}});
